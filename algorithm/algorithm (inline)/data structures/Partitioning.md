# 分块

![Head Figure](https://pic1.zhimg.com/v2-1655c12e302625448e5c09c6349258d7_1440w.jpg?source=172ae18b)

分块是一种思想，把一个整体划分为若干个小块，对整块整体处理，零散块单独处理。本文主要介绍块状数组——利用分块思想处理区间问题的一种数据结构。

块状数组把一个长度为 [公式] 的数组划分为 [公式] 块，每块长度为 [公式] 。对于一次区间操作，对区间內部的整块进行整体的操作，对区间边缘的零散块单独暴力处理。（所以分块被称为“优雅的暴力”）

这里，块数既不能太少也不能太多。如果太少，区间中整块的数量会很少，我们要花费大量时间处理零散块；如果太多，又会让块的长度太短，失去整体处理的意义。一般来说，我们取块数为 [公式] ，这样在最坏情况下，我们要处理接近 [公式] 个整块，还要对长度为 [公式] 的零散块单独处理，总时间复杂度为 [公式] 。这是一种根号算法。

显然，分块的时间复杂度比不上线段树和树状数组这些对数级算法。但由此换来的，是更高的灵活性。与线段树不同，块状数组并不要求所维护信息满足结合律，也不需要一层层地传递标记。

## References

- [1] 算法学习笔记(23): 分块: <https://zhuanlan.zhihu.com/p/114268236>
